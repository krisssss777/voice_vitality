<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„ Gemini AI åŠ©ç† (å®‰å…¨ç‰ˆ)</title>
    <style>
        /* ç°¡å–®ç¾åŒ–ä»‹é¢ */
        body { font-family: sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; line-height: 1.6; }
        #chat-box { border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 10px; margin-bottom: 10px; background: #f9f9f9; border-radius: 8px; }
        .msg { margin-bottom: 10px; padding: 8px; border-radius: 5px; }
        .user { background: #e3f2fd; text-align: right; }
        .bot { background: #f1f8e9; text-align: left; }
        input { width: 75%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 10px 15px; cursor: pointer; background: #4285f4; color: white; border: none; border-radius: 4px; }
    </style>
</head>
<body>
    <h2>ğŸš€ Gemini å®‰å…¨å¯¦é©—å®¤</h2>
    <div id="chat-box">ç³»çµ±ï¼šæ­£åœ¨é€£ç·šè‡³ Python ç®¡å®¶...</div>
    <input type="text" id="userInput" placeholder="è¼¸å…¥è¨Šæ¯...">
    <button onclick="askGemini()">é€å‡º</button>

    <script type="module">
        window.askGemini = async function() {
            const input = document.getElementById('userInput');
            const chatBox = document.getElementById('chat-box');
            if (!input.value) return;

            const userMsg = input.value;
            chatBox.innerHTML += `<div class="msg user"><b>ä½ ï¼š</b>${userMsg}</div>`;
            input.value = '';

            try {
                // å‘ä½ é›»è…¦è£¡è·‘çš„ Python ç®¡å®¶ç™¼é€è«‹æ±‚
                const response = await fetch('http://127.0.0.1:5000/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: userMsg })
                });
                
                const data = await response.json();
                chatBox.innerHTML += `<div class="msg bot"><b>ç®¡å®¶ï¼š</b>${data.reply}</div>`;
            } catch (error) {
                chatBox.innerHTML += `<div class="msg" style="color:red"><b>âŒ éŒ¯èª¤ï¼š</b>é€£ä¸ä¸Š Python ç®¡å®¶ï¼è«‹ç¢ºèªä½ çš„ Python è¦–çª—æœ‰æ²’æœ‰é¡¯ç¤º Running on http://127.0.0.1:5000</div>`;
            }
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    </script>
</body>
</html>
